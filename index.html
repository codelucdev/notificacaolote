<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Notificação de Lote Sujo</title>
<link rel="stylesheet" type="text/css" href="css/style.css"> <!-- Seu arquivo de estilo CSS -->
</head>
<body>
<div class="container">
    
    <h2 id="notificacao">NOTIFICAÇÃO DE LOTE SUJO</h2>

    <form id="formulario" method="post" action="#">
        <label for="numero_lote">NÚMERO DO LOTE:</label><br>
        <input type="text" id="numero_lote" name="numero_lote" required><br>

        <label for="endereco">ENDEREÇO DO LOTE:</label><br>
        <input type="text" id="endereco" name="endereco" required><br>

        <label for="bairro">BAIRRO:</label><br> 
        <input type="text" id="bairro" name="bairro" required><br>

        <label for="proprietario">NOME DO PROPRIETÁRIO:</label><br>
        <input type="text" id="proprietario" name="proprietario" required><br>

        <label for="cpf_cnpj">CPF ou CNPJ do Proprietário:</label><br>
        <input type="text" id="cpf_cnpj" name="cpf_cnpj" required><br>

        <label for="numero_dias">PRAZO (em dias):</label><br>
        <input type="number" id="numero_dias" name="numero_dias" required><br><br>

        <button type="button" id="gerarPDF">Gerar Notificação</button>
        <p class="error-message" id="error-message"></p>
    </form>
    
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.0/html2pdf.bundle.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('gerarPDF').addEventListener('click', function() {
        var numeroLote = document.getElementById('numero_lote').value.toUpperCase();
        var endereco = document.getElementById('endereco').value.toUpperCase();
        var bairro = document.getElementById('bairro').value.toUpperCase();
        var proprietario = document.getElementById('proprietario').value.toUpperCase();
        var cpfCnpj = document.getElementById('cpf_cnpj').value.toUpperCase();
        var prazoDias = document.getElementById('numero_dias').value;

        // Verificar se todos os campos estão preenchidos
        if (!numeroLote || !endereco || !bairro || !proprietario || !cpfCnpj || !prazoDias) {
            document.getElementById('error-message').textContent = 'Por favor, preencha todos os campos.';
            return;
        }

        // Limpar mensagem de erro
        document.getElementById('error-message').textContent = '';

        // Gerar o PDF com os dados da notificação
        var conteudoPDF = `
        <img src="img/logoprefeitura.jpeg" alt="Logo Prefeitura" style="width: 80px; height: 80px; display: block; margin:0 auto; margin-top:40px;"><br><br>  
            <h2 style="text-align: center; font-size:25px;">NOTIFICAÇÃO DE LOTE SUJO ${numeroLote}-2024</h2><br><br>


            <p style="margin: 0 65px;">Considerando o teor da Lei Municipal n°2.126/19 (Código de Posturas), a Prefeitura Municipal de São João da Ponte MG NOTIFICA ${proprietario},
                titular de um lote na ${endereco}, ${bairro}, nos seguintes termos:
            </p><br>
            <p style="margin: 0 65px; font-style: italic;">
                Art. 13. - Os terrenos situados na área urbana e de expansão urbana deste Município deverão ser mantidos limpos,
                 capinados e isentos de quaisquer materiais nocivos a saúde da vizinhança e da coletividade<br>
            
            
                §1° - A capinação do terreno deverá ser realizada por, pelo menos,
                 03 (três) vezes por ano e toda vez que a vegetação atingir mais de 50 cm (cinquenta centímetros) de altura. <br>  
           
            
                Art. 17 – É Proibido depositar ou descarregar qualquer espécie de lixo, folhagem de jardins ou resíduos industriais, em terrenos localizados
                 nos núcleos urbanos ou na área em expansão urbana, mesmo que os referidos terrenos não estejam devidamente fechados.<br>  
            </p><br>
            <p style="margin: 0 65px;">
                Sendo assim, ${proprietario} fica <strong>CIENTE a efetuar a limpeza do lote acima citado no prazo máximo de ${prazoDias}
                 dias a contar do recebimento deste, caso não cumpra com a notificação, o imóvel esta passivo de MULTA.</strong><br>   
            
            
                Entretanto, fica o notificado ciente que caso reitere a infração verificada ou pratique outras condutas proibidas, poderá ser agravada a penalidade,
                 inclusive com a aplicação de multa e outras sanções descritas no artigo 180 da Lei Municipal n° 2.126/19.
            </p><br>
            <p style="margin: 0 65px; font-size:14px;">São João da Ponte MG ${new Date().toLocaleDateString()}</p>
            <p style="margin: 0 65px; font-size:14px;"<strong>Data de vencimento:</strong> ${new Date(new Date().getTime() + (prazoDias * 24 * 60 * 60 * 1000)).toLocaleDateString()}</p><br><br>
            <p style="text-align:center;">_________________________________</p><br>
            <p style="text-align:center;">Lucas Renan Santana Barbosa</p>
            <p style="text-align:center;">Fiscal de Posturas</p><br><br>
            <p style="margin: 0 65px; text-align: justify;">Assinatura_______________________________ Data:____/____/____
            
        `;

        // Gerar o PDF com ajustes de qualidade
        html2pdf().from(conteudoPDF).set({
            filename: 'notificacao_lote_sujo.pdf',
            pagebreak: { mode: 'avoid-all' },
            html2canvas: { scale: 2 }, // Aumenta a escala da captura de tela
            jsPDF: { unit: 'pt', format: 'a4', orientation: 'portrait', output: 3 } // Ajusta a qualidade do PDF
        }).save();
    });
});
</script>
</body>
</html>
